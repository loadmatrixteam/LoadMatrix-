{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{motion}from'framer-motion';import{Package,MapPin,Clock,DollarSign,ArrowLeft,CheckCircle,XCircle,Eye,Navigation,RefreshCw,Filter,Search}from'lucide-react';import Layout from'../../components/Layout/Layout';import{useAuth}from'../../contexts/AuthContext';import api from'../../utils/api';import toast from'react-hot-toast';import LoadingSpinner from'../../components/LoadingSpinner';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DriverOrders=()=>{const{user}=useAuth();const navigate=useNavigate();const[availableOrders,setAvailableOrders]=useState([]);const[myOrders,setMyOrders]=useState([]);const[requestedOrders,setRequestedOrders]=useState([]);const[loading,setLoading]=useState(true);const[activeTab,setActiveTab]=useState('available');const[searchTerm,setSearchTerm]=useState('');const[statusFilter,setStatusFilter]=useState('all');useEffect(()=>{fetchOrders();},[]);const fetchOrders=async()=>{try{const[availableResponse,myOrdersResponse]=await Promise.all([api.get('/driver/orders/available'),api.get('/driver/orders')]);setAvailableOrders(availableResponse.data);setMyOrders(myOrdersResponse.data);// Try to fetch requested orders if we have driver profile\ntry{const profileResponse=await api.get('/driver/profile');if(profileResponse.data.driver_id){const requestedResponse=await api.get(\"/driver/orders/requested/\".concat(profileResponse.data.driver_id));setRequestedOrders(requestedResponse.data);}}catch(error){console.log('No requested orders');}}catch(error){toast.error('Failed to load orders');}finally{setLoading(false);}};const acceptOrder=async orderId=>{try{await api.post(\"/driver/orders/\".concat(orderId,\"/accept\"));toast.success('Order accepted successfully!');fetchOrders();// Refresh data\n}catch(error){toast.error('Failed to accept order');}};const acceptOrderRequest=async orderId=>{try{await api.post(\"/driver/orders/\".concat(orderId,\"/accept_request\"));toast.success('Order request accepted!');fetchOrders();// Refresh data\n}catch(error){toast.error('Failed to accept order request');}};const rejectOrderRequest=async orderId=>{try{await api.post(\"/driver/orders/\".concat(orderId,\"/reject_request\"));toast.success('Order request rejected');fetchOrders();// Refresh data\n}catch(error){toast.error('Failed to reject order request');}};const updateOrderStatus=async(orderId,newStatus)=>{try{await api.post(\"/driver/orders/\".concat(orderId,\"/status\"),{status:newStatus});toast.success(\"Order marked as \".concat(newStatus));fetchOrders();// Refresh data\n}catch(error){toast.error('Failed to update order status');}};const getStatusColor=status=>{const colors={pending:'bg-warning-100 text-warning-800',requested:'bg-secondary-100 text-secondary-800',accepted:'bg-primary-100 text-primary-800',assigned:'bg-primary-100 text-primary-800',picked:'bg-accent-100 text-accent-800',delivering:'bg-accent-100 text-accent-800',delivered:'bg-success-100 text-success-800',cancelled:'bg-danger-100 text-danger-800'};return colors[status]||'bg-neutral-100 text-neutral-800';};const formatStatus=status=>{return status.charAt(0).toUpperCase()+status.slice(1);};const getNextStatus=currentStatus=>{const statusFlow={'accepted':'picked','assigned':'picked','picked':'delivering','delivering':'delivered'};return statusFlow[currentStatus];};const getStatusAction=status=>{const actions={'accepted':'Mark as Picked','assigned':'Mark as Picked','picked':'Mark as Delivering','delivering':'Mark as Delivered'};return actions[status];};const filteredMyOrders=myOrders.filter(order=>{var _order$pickup_address,_order$drop_address;const matchesSearch=((_order$pickup_address=order.pickup_address)===null||_order$pickup_address===void 0?void 0:_order$pickup_address.toLowerCase().includes(searchTerm.toLowerCase()))||((_order$drop_address=order.drop_address)===null||_order$drop_address===void 0?void 0:_order$drop_address.toLowerCase().includes(searchTerm.toLowerCase()))||order.id.toString().includes(searchTerm);const matchesStatus=statusFilter==='all'||order.status===statusFilter;return matchesSearch&&matchesStatus;});if(loading){return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen\",children:/*#__PURE__*/_jsx(LoadingSpinner,{size:\"xl\"})})});}return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:[/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:\"mb-8\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('/driver'),className:\"inline-flex items-center text-neutral-600 hover:text-primary-600 transition-colors duration-200 mb-4\",children:[/*#__PURE__*/_jsx(ArrowLeft,{className:\"h-4 w-4 mr-2\"}),\"Back to Dashboard\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-neutral-900 mb-2\",children:\"Orders Management\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-neutral-600\",children:\"Manage your deliveries and find new opportunities\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:fetchOrders,className:\"btn btn-outline\",children:[/*#__PURE__*/_jsx(RefreshCw,{className:\"h-4 w-4 mr-2\"}),\"Refresh\"]})]})]}),/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:0.1},className:\"mb-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"border-b border-neutral-200\",children:/*#__PURE__*/_jsxs(\"nav\",{className:\"-mb-px flex space-x-8\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('available'),className:\"py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 \".concat(activeTab==='available'?'border-primary-500 text-primary-600':'border-transparent text-neutral-500 hover:text-neutral-700 hover:border-neutral-300'),children:[\"Available Orders (\",availableOrders.length,\")\"]}),requestedOrders.length>0&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('requested'),className:\"py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 \".concat(activeTab==='requested'?'border-primary-500 text-primary-600':'border-transparent text-neutral-500 hover:text-neutral-700 hover:border-neutral-300'),children:[\"Requests (\",requestedOrders.length,\")\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('my-orders'),className:\"py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 \".concat(activeTab==='my-orders'?'border-primary-500 text-primary-600':'border-transparent text-neutral-500 hover:text-neutral-700 hover:border-neutral-300'),children:[\"My Orders (\",myOrders.length,\")\"]})]})})}),activeTab==='my-orders'&&/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:0.2},className:\"mb-6 flex flex-col sm:flex-row gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex-1\",children:[/*#__PURE__*/_jsx(Search,{className:\"absolute left-3 top-1/2 transform -translate-y-1/2 text-neutral-400 h-4 w-4\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search orders...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"input pl-10\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:statusFilter,onChange:e=>setStatusFilter(e.target.value),className:\"input w-full sm:w-48\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All Status\"}),/*#__PURE__*/_jsx(\"option\",{value:\"accepted\",children:\"Accepted\"}),/*#__PURE__*/_jsx(\"option\",{value:\"assigned\",children:\"Assigned\"}),/*#__PURE__*/_jsx(\"option\",{value:\"picked\",children:\"Picked\"}),/*#__PURE__*/_jsx(\"option\",{value:\"delivering\",children:\"Delivering\"}),/*#__PURE__*/_jsx(\"option\",{value:\"delivered\",children:\"Delivered\"}),/*#__PURE__*/_jsx(\"option\",{value:\"cancelled\",children:\"Cancelled\"})]})]}),/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:0.3},children:[activeTab==='available'&&/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:availableOrders.length>0?availableOrders.map((order,index)=>/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:index*0.1},className:\"card p-6 card-hover\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 mb-3\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-neutral-900\",children:[\"Order #\",order.id]}),/*#__PURE__*/_jsxs(\"span\",{className:\"px-3 py-1 rounded-full text-sm font-medium bg-success-100 text-success-800\",children:[\"\\u20B9\",order.fare_total]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-2\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"h-4 w-4 text-primary-500 mt-1 flex-shrink-0\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-neutral-700\",children:\"Pickup\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-neutral-600\",children:order.pickup_address})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-2\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"h-4 w-4 text-secondary-500 mt-1 flex-shrink-0\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-neutral-700\",children:\"Drop\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-neutral-600\",children:order.drop_address})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-6 text-sm text-neutral-600\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(Navigation,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsxs(\"span\",{children:[order.pickup&&order.drop?Math.sqrt(Math.pow(order.drop[0]-order.pickup[0],2)+Math.pow(order.drop[1]-order.pickup[1],2)).toFixed(1):'N/A',\"km\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(DollarSign,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20B9\",order.fare_total,\" total\"]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col space-y-2\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>acceptOrder(order.id),className:\"btn btn-primary\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"h-4 w-4 mr-2\"}),\"Accept Order\"]})})]})},order.id)):/*#__PURE__*/_jsxs(\"div\",{className:\"card p-12 text-center\",children:[/*#__PURE__*/_jsx(Package,{className:\"h-16 w-16 text-neutral-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-neutral-900 mb-2\",children:\"No Available Orders\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-neutral-600 mb-4\",children:\"Check back later for new delivery opportunities\"}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchOrders,className:\"btn btn-primary\",children:\"Refresh Orders\"})]})}),activeTab==='requested'&&/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:requestedOrders.length>0?requestedOrders.map((order,index)=>/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:index*0.1},className:\"card p-6 border-l-4 border-l-warning-400\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 mb-3\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-neutral-900\",children:[\"Order #\",order.id]}),/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 rounded-full text-sm font-medium bg-warning-100 text-warning-800\",children:\"Customer Request\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"px-3 py-1 rounded-full text-sm font-medium bg-success-100 text-success-800\",children:[\"\\u20B9\",order.fare_total]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-neutral-600 mb-3\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Customer:\"}),\" \",order.customer_name]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-2\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"h-4 w-4 text-primary-500 mt-1 flex-shrink-0\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-neutral-700\",children:\"Pickup\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-neutral-600\",children:order.pickup_address})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-2\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"h-4 w-4 text-secondary-500 mt-1 flex-shrink-0\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-neutral-700\",children:\"Drop\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-neutral-600\",children:order.drop_address})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-6 text-sm text-neutral-600\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(Navigation,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsxs(\"span\",{children:[order.distance_km,\"km\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(Clock,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:new Date(order.created_at).toLocaleDateString()})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col space-y-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>acceptOrderRequest(order.id),className:\"btn btn-primary\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"h-4 w-4 mr-2\"}),\"Accept Request\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>rejectOrderRequest(order.id),className:\"btn btn-outline\",children:[/*#__PURE__*/_jsx(XCircle,{className:\"h-4 w-4 mr-2\"}),\"Reject\"]})]})]})},order.id)):/*#__PURE__*/_jsxs(\"div\",{className:\"card p-12 text-center\",children:[/*#__PURE__*/_jsx(Package,{className:\"h-16 w-16 text-neutral-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-neutral-900 mb-2\",children:\"No Order Requests\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-neutral-600\",children:\"You don't have any pending order requests from customers\"})]})}),activeTab==='my-orders'&&/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:filteredMyOrders.length>0?filteredMyOrders.map((order,index)=>/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:index*0.1},className:\"card p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 mb-3\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-neutral-900\",children:[\"Order #\",order.id]}),/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 rounded-full text-sm font-medium \".concat(getStatusColor(order.status)),children:formatStatus(order.status)}),/*#__PURE__*/_jsxs(\"span\",{className:\"px-3 py-1 rounded-full text-sm font-medium bg-success-100 text-success-800\",children:[\"\\u20B9\",order.driver_share]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-2\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"h-4 w-4 text-primary-500 mt-1 flex-shrink-0\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-neutral-700\",children:\"Pickup\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-neutral-600\",children:order.pickup_address})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-2\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"h-4 w-4 text-secondary-500 mt-1 flex-shrink-0\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-neutral-700\",children:\"Drop\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-neutral-600\",children:order.drop_address})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-6 text-sm text-neutral-600\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(Navigation,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsxs(\"span\",{children:[order.distance_km,\"km\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(DollarSign,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20B9\",order.driver_share,\" earnings\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(Clock,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:new Date(order.created_at).toLocaleDateString()})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col space-y-2\",children:[getNextStatus(order.status)&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateOrderStatus(order.id,getNextStatus(order.status)),className:\"btn btn-primary\",children:getStatusAction(order.status)}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-ghost\",children:[/*#__PURE__*/_jsx(Eye,{className:\"h-4 w-4 mr-2\"}),\"View Details\"]})]})]})},order.id)):/*#__PURE__*/_jsxs(\"div\",{className:\"card p-12 text-center\",children:[/*#__PURE__*/_jsx(Package,{className:\"h-16 w-16 text-neutral-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-neutral-900 mb-2\",children:searchTerm||statusFilter!=='all'?'No matching orders':'No orders yet'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-neutral-600 mb-4\",children:searchTerm||statusFilter!=='all'?'Try adjusting your search or filter criteria':'Start accepting orders to see them here'}),searchTerm||statusFilter!=='all'?/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSearchTerm('');setStatusFilter('all');},className:\"btn btn-outline\",children:\"Clear Filters\"}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('available'),className:\"btn btn-primary\",children:\"View Available Orders\"})]})})]})]})});};export default DriverOrders;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","motion","Package","MapPin","Clock","DollarSign","ArrowLeft","CheckCircle","XCircle","Eye","Navigation","RefreshCw","Filter","Search","Layout","useAuth","api","toast","LoadingSpinner","jsx","_jsx","jsxs","_jsxs","DriverOrders","user","navigate","availableOrders","setAvailableOrders","myOrders","setMyOrders","requestedOrders","setRequestedOrders","loading","setLoading","activeTab","setActiveTab","searchTerm","setSearchTerm","statusFilter","setStatusFilter","fetchOrders","availableResponse","myOrdersResponse","Promise","all","get","data","profileResponse","driver_id","requestedResponse","concat","error","console","log","acceptOrder","orderId","post","success","acceptOrderRequest","rejectOrderRequest","updateOrderStatus","newStatus","status","getStatusColor","colors","pending","requested","accepted","assigned","picked","delivering","delivered","cancelled","formatStatus","charAt","toUpperCase","slice","getNextStatus","currentStatus","statusFlow","getStatusAction","actions","filteredMyOrders","filter","order","_order$pickup_address","_order$drop_address","matchesSearch","pickup_address","toLowerCase","includes","drop_address","id","toString","matchesStatus","children","className","size","div","initial","opacity","y","animate","onClick","transition","delay","length","type","placeholder","value","onChange","e","target","map","index","x","fare_total","pickup","drop","Math","sqrt","pow","toFixed","customer_name","distance_km","Date","created_at","toLocaleDateString","driver_share"],"sources":["E:/swiftlogix.shlok/frontend/src/pages/driver/DriverOrders.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { motion } from 'framer-motion';\r\nimport { \r\n  Package, \r\n  MapPin, \r\n  Clock, \r\n  DollarSign,\r\n  ArrowLeft,\r\n  CheckCircle,\r\n  XCircle,\r\n  Eye,\r\n  Navigation,\r\n  RefreshCw,\r\n  Filter,\r\n  Search\r\n} from 'lucide-react';\r\nimport Layout from '../../components/Layout/Layout';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport api from '../../utils/api';\r\nimport toast from 'react-hot-toast';\r\nimport LoadingSpinner from '../../components/LoadingSpinner';\r\n\r\nconst DriverOrders = () => {\r\n  const { user } = useAuth();\r\n  const navigate = useNavigate();\r\n  const [availableOrders, setAvailableOrders] = useState([]);\r\n  const [myOrders, setMyOrders] = useState([]);\r\n  const [requestedOrders, setRequestedOrders] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [activeTab, setActiveTab] = useState('available');\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [statusFilter, setStatusFilter] = useState('all');\r\n\r\n  useEffect(() => {\r\n    fetchOrders();\r\n  }, []);\r\n\r\n  const fetchOrders = async () => {\r\n    try {\r\n      const [availableResponse, myOrdersResponse] = await Promise.all([\r\n        api.get('/driver/orders/available'),\r\n        api.get('/driver/orders')\r\n      ]);\r\n\r\n      setAvailableOrders(availableResponse.data);\r\n      setMyOrders(myOrdersResponse.data);\r\n\r\n      // Try to fetch requested orders if we have driver profile\r\n      try {\r\n        const profileResponse = await api.get('/driver/profile');\r\n        if (profileResponse.data.driver_id) {\r\n          const requestedResponse = await api.get(`/driver/orders/requested/${profileResponse.data.driver_id}`);\r\n          setRequestedOrders(requestedResponse.data);\r\n        }\r\n      } catch (error) {\r\n        console.log('No requested orders');\r\n      }\r\n\r\n    } catch (error) {\r\n      toast.error('Failed to load orders');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const acceptOrder = async (orderId) => {\r\n    try {\r\n      await api.post(`/driver/orders/${orderId}/accept`);\r\n      toast.success('Order accepted successfully!');\r\n      fetchOrders(); // Refresh data\r\n    } catch (error) {\r\n      toast.error('Failed to accept order');\r\n    }\r\n  };\r\n\r\n  const acceptOrderRequest = async (orderId) => {\r\n    try {\r\n      await api.post(`/driver/orders/${orderId}/accept_request`);\r\n      toast.success('Order request accepted!');\r\n      fetchOrders(); // Refresh data\r\n    } catch (error) {\r\n      toast.error('Failed to accept order request');\r\n    }\r\n  };\r\n\r\n  const rejectOrderRequest = async (orderId) => {\r\n    try {\r\n      await api.post(`/driver/orders/${orderId}/reject_request`);\r\n      toast.success('Order request rejected');\r\n      fetchOrders(); // Refresh data\r\n    } catch (error) {\r\n      toast.error('Failed to reject order request');\r\n    }\r\n  };\r\n\r\n  const updateOrderStatus = async (orderId, newStatus) => {\r\n    try {\r\n      await api.post(`/driver/orders/${orderId}/status`, { status: newStatus });\r\n      toast.success(`Order marked as ${newStatus}`);\r\n      fetchOrders(); // Refresh data\r\n    } catch (error) {\r\n      toast.error('Failed to update order status');\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    const colors = {\r\n      pending: 'bg-warning-100 text-warning-800',\r\n      requested: 'bg-secondary-100 text-secondary-800',\r\n      accepted: 'bg-primary-100 text-primary-800',\r\n      assigned: 'bg-primary-100 text-primary-800',\r\n      picked: 'bg-accent-100 text-accent-800',\r\n      delivering: 'bg-accent-100 text-accent-800',\r\n      delivered: 'bg-success-100 text-success-800',\r\n      cancelled: 'bg-danger-100 text-danger-800'\r\n    };\r\n    return colors[status] || 'bg-neutral-100 text-neutral-800';\r\n  };\r\n\r\n  const formatStatus = (status) => {\r\n    return status.charAt(0).toUpperCase() + status.slice(1);\r\n  };\r\n\r\n  const getNextStatus = (currentStatus) => {\r\n    const statusFlow = {\r\n      'accepted': 'picked',\r\n      'assigned': 'picked',\r\n      'picked': 'delivering',\r\n      'delivering': 'delivered'\r\n    };\r\n    return statusFlow[currentStatus];\r\n  };\r\n\r\n  const getStatusAction = (status) => {\r\n    const actions = {\r\n      'accepted': 'Mark as Picked',\r\n      'assigned': 'Mark as Picked',\r\n      'picked': 'Mark as Delivering',\r\n      'delivering': 'Mark as Delivered'\r\n    };\r\n    return actions[status];\r\n  };\r\n\r\n  const filteredMyOrders = myOrders.filter(order => {\r\n    const matchesSearch = order.pickup_address?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                         order.drop_address?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                         order.id.toString().includes(searchTerm);\r\n    const matchesStatus = statusFilter === 'all' || order.status === statusFilter;\r\n    return matchesSearch && matchesStatus;\r\n  });\r\n\r\n  if (loading) {\r\n    return (\r\n      <Layout>\r\n        <div className=\"flex items-center justify-center min-h-screen\">\r\n          <LoadingSpinner size=\"xl\" />\r\n        </div>\r\n      </Layout>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Layout>\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n        {/* Header */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          className=\"mb-8\"\r\n        >\r\n          <button\r\n            onClick={() => navigate('/driver')}\r\n            className=\"inline-flex items-center text-neutral-600 hover:text-primary-600 transition-colors duration-200 mb-4\"\r\n          >\r\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\r\n            Back to Dashboard\r\n          </button>\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h1 className=\"text-3xl font-bold text-neutral-900 mb-2\">\r\n                Orders Management\r\n              </h1>\r\n              <p className=\"text-neutral-600\">\r\n                Manage your deliveries and find new opportunities\r\n              </p>\r\n            </div>\r\n            <button\r\n              onClick={fetchOrders}\r\n              className=\"btn btn-outline\"\r\n            >\r\n              <RefreshCw className=\"h-4 w-4 mr-2\" />\r\n              Refresh\r\n            </button>\r\n          </div>\r\n        </motion.div>\r\n\r\n        {/* Tabs */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ delay: 0.1 }}\r\n          className=\"mb-6\"\r\n        >\r\n          <div className=\"border-b border-neutral-200\">\r\n            <nav className=\"-mb-px flex space-x-8\">\r\n              <button\r\n                onClick={() => setActiveTab('available')}\r\n                className={`py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${\r\n                  activeTab === 'available'\r\n                    ? 'border-primary-500 text-primary-600'\r\n                    : 'border-transparent text-neutral-500 hover:text-neutral-700 hover:border-neutral-300'\r\n                }`}\r\n              >\r\n                Available Orders ({availableOrders.length})\r\n              </button>\r\n              {requestedOrders.length > 0 && (\r\n                <button\r\n                  onClick={() => setActiveTab('requested')}\r\n                  className={`py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${\r\n                    activeTab === 'requested'\r\n                      ? 'border-primary-500 text-primary-600'\r\n                      : 'border-transparent text-neutral-500 hover:text-neutral-700 hover:border-neutral-300'\r\n                  }`}\r\n                >\r\n                  Requests ({requestedOrders.length})\r\n                </button>\r\n              )}\r\n              <button\r\n                onClick={() => setActiveTab('my-orders')}\r\n                className={`py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${\r\n                  activeTab === 'my-orders'\r\n                    ? 'border-primary-500 text-primary-600'\r\n                    : 'border-transparent text-neutral-500 hover:text-neutral-700 hover:border-neutral-300'\r\n                }`}\r\n              >\r\n                My Orders ({myOrders.length})\r\n              </button>\r\n            </nav>\r\n          </div>\r\n        </motion.div>\r\n\r\n        {/* Search and Filter for My Orders */}\r\n        {activeTab === 'my-orders' && (\r\n          <motion.div\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ delay: 0.2 }}\r\n            className=\"mb-6 flex flex-col sm:flex-row gap-4\"\r\n          >\r\n            <div className=\"relative flex-1\">\r\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-neutral-400 h-4 w-4\" />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Search orders...\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n                className=\"input pl-10\"\r\n              />\r\n            </div>\r\n            <select\r\n              value={statusFilter}\r\n              onChange={(e) => setStatusFilter(e.target.value)}\r\n              className=\"input w-full sm:w-48\"\r\n            >\r\n              <option value=\"all\">All Status</option>\r\n              <option value=\"accepted\">Accepted</option>\r\n              <option value=\"assigned\">Assigned</option>\r\n              <option value=\"picked\">Picked</option>\r\n              <option value=\"delivering\">Delivering</option>\r\n              <option value=\"delivered\">Delivered</option>\r\n              <option value=\"cancelled\">Cancelled</option>\r\n            </select>\r\n          </motion.div>\r\n        )}\r\n\r\n        {/* Content based on active tab */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ delay: 0.3 }}\r\n        >\r\n          {/* Available Orders Tab */}\r\n          {activeTab === 'available' && (\r\n            <div className=\"space-y-4\">\r\n              {availableOrders.length > 0 ? (\r\n                availableOrders.map((order, index) => (\r\n                  <motion.div\r\n                    key={order.id}\r\n                    initial={{ opacity: 0, x: -20 }}\r\n                    animate={{ opacity: 1, x: 0 }}\r\n                    transition={{ delay: index * 0.1 }}\r\n                    className=\"card p-6 card-hover\"\r\n                  >\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div className=\"flex-1\">\r\n                        <div className=\"flex items-center space-x-3 mb-3\">\r\n                          <h3 className=\"text-lg font-semibold text-neutral-900\">\r\n                            Order #{order.id}\r\n                          </h3>\r\n                          <span className=\"px-3 py-1 rounded-full text-sm font-medium bg-success-100 text-success-800\">\r\n                            ₹{order.fare_total}\r\n                          </span>\r\n                        </div>\r\n                        \r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\r\n                          <div className=\"flex items-start space-x-2\">\r\n                            <MapPin className=\"h-4 w-4 text-primary-500 mt-1 flex-shrink-0\" />\r\n                            <div>\r\n                              <p className=\"text-sm font-medium text-neutral-700\">Pickup</p>\r\n                              <p className=\"text-sm text-neutral-600\">{order.pickup_address}</p>\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"flex items-start space-x-2\">\r\n                            <MapPin className=\"h-4 w-4 text-secondary-500 mt-1 flex-shrink-0\" />\r\n                            <div>\r\n                              <p className=\"text-sm font-medium text-neutral-700\">Drop</p>\r\n                              <p className=\"text-sm text-neutral-600\">{order.drop_address}</p>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center space-x-6 text-sm text-neutral-600\">\r\n                          <div className=\"flex items-center space-x-1\">\r\n                            <Navigation className=\"h-4 w-4\" />\r\n                            <span>\r\n                              {order.pickup && order.drop ? \r\n                                Math.sqrt(\r\n                                  Math.pow(order.drop[0] - order.pickup[0], 2) + \r\n                                  Math.pow(order.drop[1] - order.pickup[1], 2)\r\n                                ).toFixed(1) : 'N/A'\r\n                              }km\r\n                            </span>\r\n                          </div>\r\n                          <div className=\"flex items-center space-x-1\">\r\n                            <DollarSign className=\"h-4 w-4\" />\r\n                            <span>₹{order.fare_total} total</span>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"flex flex-col space-y-2\">\r\n                        <button\r\n                          onClick={() => acceptOrder(order.id)}\r\n                          className=\"btn btn-primary\"\r\n                        >\r\n                          <CheckCircle className=\"h-4 w-4 mr-2\" />\r\n                          Accept Order\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </motion.div>\r\n                ))\r\n              ) : (\r\n                <div className=\"card p-12 text-center\">\r\n                  <Package className=\"h-16 w-16 text-neutral-400 mx-auto mb-4\" />\r\n                  <h3 className=\"text-xl font-semibold text-neutral-900 mb-2\">No Available Orders</h3>\r\n                  <p className=\"text-neutral-600 mb-4\">\r\n                    Check back later for new delivery opportunities\r\n                  </p>\r\n                  <button\r\n                    onClick={fetchOrders}\r\n                    className=\"btn btn-primary\"\r\n                  >\r\n                    Refresh Orders\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* Requested Orders Tab */}\r\n          {activeTab === 'requested' && (\r\n            <div className=\"space-y-4\">\r\n              {requestedOrders.length > 0 ? (\r\n                requestedOrders.map((order, index) => (\r\n                  <motion.div\r\n                    key={order.id}\r\n                    initial={{ opacity: 0, x: -20 }}\r\n                    animate={{ opacity: 1, x: 0 }}\r\n                    transition={{ delay: index * 0.1 }}\r\n                    className=\"card p-6 border-l-4 border-l-warning-400\"\r\n                  >\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div className=\"flex-1\">\r\n                        <div className=\"flex items-center space-x-3 mb-3\">\r\n                          <h3 className=\"text-lg font-semibold text-neutral-900\">\r\n                            Order #{order.id}\r\n                          </h3>\r\n                          <span className=\"px-3 py-1 rounded-full text-sm font-medium bg-warning-100 text-warning-800\">\r\n                            Customer Request\r\n                          </span>\r\n                          <span className=\"px-3 py-1 rounded-full text-sm font-medium bg-success-100 text-success-800\">\r\n                            ₹{order.fare_total}\r\n                          </span>\r\n                        </div>\r\n                        \r\n                        <p className=\"text-sm text-neutral-600 mb-3\">\r\n                          <strong>Customer:</strong> {order.customer_name}\r\n                        </p>\r\n\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\r\n                          <div className=\"flex items-start space-x-2\">\r\n                            <MapPin className=\"h-4 w-4 text-primary-500 mt-1 flex-shrink-0\" />\r\n                            <div>\r\n                              <p className=\"text-sm font-medium text-neutral-700\">Pickup</p>\r\n                              <p className=\"text-sm text-neutral-600\">{order.pickup_address}</p>\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"flex items-start space-x-2\">\r\n                            <MapPin className=\"h-4 w-4 text-secondary-500 mt-1 flex-shrink-0\" />\r\n                            <div>\r\n                              <p className=\"text-sm font-medium text-neutral-700\">Drop</p>\r\n                              <p className=\"text-sm text-neutral-600\">{order.drop_address}</p>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center space-x-6 text-sm text-neutral-600\">\r\n                          <div className=\"flex items-center space-x-1\">\r\n                            <Navigation className=\"h-4 w-4\" />\r\n                            <span>{order.distance_km}km</span>\r\n                          </div>\r\n                          <div className=\"flex items-center space-x-1\">\r\n                            <Clock className=\"h-4 w-4\" />\r\n                            <span>{new Date(order.created_at).toLocaleDateString()}</span>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"flex flex-col space-y-2\">\r\n                        <button\r\n                          onClick={() => acceptOrderRequest(order.id)}\r\n                          className=\"btn btn-primary\"\r\n                        >\r\n                          <CheckCircle className=\"h-4 w-4 mr-2\" />\r\n                          Accept Request\r\n                        </button>\r\n                        <button\r\n                          onClick={() => rejectOrderRequest(order.id)}\r\n                          className=\"btn btn-outline\"\r\n                        >\r\n                          <XCircle className=\"h-4 w-4 mr-2\" />\r\n                          Reject\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </motion.div>\r\n                ))\r\n              ) : (\r\n                <div className=\"card p-12 text-center\">\r\n                  <Package className=\"h-16 w-16 text-neutral-400 mx-auto mb-4\" />\r\n                  <h3 className=\"text-xl font-semibold text-neutral-900 mb-2\">No Order Requests</h3>\r\n                  <p className=\"text-neutral-600\">\r\n                    You don't have any pending order requests from customers\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* My Orders Tab */}\r\n          {activeTab === 'my-orders' && (\r\n            <div className=\"space-y-4\">\r\n              {filteredMyOrders.length > 0 ? (\r\n                filteredMyOrders.map((order, index) => (\r\n                  <motion.div\r\n                    key={order.id}\r\n                    initial={{ opacity: 0, x: -20 }}\r\n                    animate={{ opacity: 1, x: 0 }}\r\n                    transition={{ delay: index * 0.1 }}\r\n                    className=\"card p-6\"\r\n                  >\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div className=\"flex-1\">\r\n                        <div className=\"flex items-center space-x-3 mb-3\">\r\n                          <h3 className=\"text-lg font-semibold text-neutral-900\">\r\n                            Order #{order.id}\r\n                          </h3>\r\n                          <span className={`px-3 py-1 rounded-full text-sm font-medium ${getStatusColor(order.status)}`}>\r\n                            {formatStatus(order.status)}\r\n                          </span>\r\n                          <span className=\"px-3 py-1 rounded-full text-sm font-medium bg-success-100 text-success-800\">\r\n                            ₹{order.driver_share}\r\n                          </span>\r\n                        </div>\r\n                        \r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\r\n                          <div className=\"flex items-start space-x-2\">\r\n                            <MapPin className=\"h-4 w-4 text-primary-500 mt-1 flex-shrink-0\" />\r\n                            <div>\r\n                              <p className=\"text-sm font-medium text-neutral-700\">Pickup</p>\r\n                              <p className=\"text-sm text-neutral-600\">{order.pickup_address}</p>\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"flex items-start space-x-2\">\r\n                            <MapPin className=\"h-4 w-4 text-secondary-500 mt-1 flex-shrink-0\" />\r\n                            <div>\r\n                              <p className=\"text-sm font-medium text-neutral-700\">Drop</p>\r\n                              <p className=\"text-sm text-neutral-600\">{order.drop_address}</p>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center space-x-6 text-sm text-neutral-600\">\r\n                          <div className=\"flex items-center space-x-1\">\r\n                            <Navigation className=\"h-4 w-4\" />\r\n                            <span>{order.distance_km}km</span>\r\n                          </div>\r\n                          <div className=\"flex items-center space-x-1\">\r\n                            <DollarSign className=\"h-4 w-4\" />\r\n                            <span>₹{order.driver_share} earnings</span>\r\n                          </div>\r\n                          <div className=\"flex items-center space-x-1\">\r\n                            <Clock className=\"h-4 w-4\" />\r\n                            <span>{new Date(order.created_at).toLocaleDateString()}</span>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"flex flex-col space-y-2\">\r\n                        {getNextStatus(order.status) && (\r\n                          <button\r\n                            onClick={() => updateOrderStatus(order.id, getNextStatus(order.status))}\r\n                            className=\"btn btn-primary\"\r\n                          >\r\n                            {getStatusAction(order.status)}\r\n                          </button>\r\n                        )}\r\n                        <button className=\"btn btn-ghost\">\r\n                          <Eye className=\"h-4 w-4 mr-2\" />\r\n                          View Details\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </motion.div>\r\n                ))\r\n              ) : (\r\n                <div className=\"card p-12 text-center\">\r\n                  <Package className=\"h-16 w-16 text-neutral-400 mx-auto mb-4\" />\r\n                  <h3 className=\"text-xl font-semibold text-neutral-900 mb-2\">\r\n                    {searchTerm || statusFilter !== 'all' ? 'No matching orders' : 'No orders yet'}\r\n                  </h3>\r\n                  <p className=\"text-neutral-600 mb-4\">\r\n                    {searchTerm || statusFilter !== 'all' \r\n                      ? 'Try adjusting your search or filter criteria'\r\n                      : 'Start accepting orders to see them here'\r\n                    }\r\n                  </p>\r\n                  {searchTerm || statusFilter !== 'all' ? (\r\n                    <button\r\n                      onClick={() => {\r\n                        setSearchTerm('');\r\n                        setStatusFilter('all');\r\n                      }}\r\n                      className=\"btn btn-outline\"\r\n                    >\r\n                      Clear Filters\r\n                    </button>\r\n                  ) : (\r\n                    <button\r\n                      onClick={() => setActiveTab('available')}\r\n                      className=\"btn btn-primary\"\r\n                    >\r\n                      View Available Orders\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </motion.div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default DriverOrders;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}